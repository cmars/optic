---
title: Foo
middleware_url: https://github.com/opticdev/optic-node
middleware_readme: https://github.com/opticdev/optic-node/blob/main/README.md
productboard_url: ""
start_command: "./foo"
---

import { ShowWhenSdk, ShowWhenProxy } from '../../src/components/FrameworkHelper';
import ExpandDocs from '../../src/components/Expand';
import FrameworksMiddlewareDesc from '/docs/shared/frameworks-middleware-desc.mdx';
import FrameworksMiddleware from '/docs/shared/frameworks-middleware.mdx';
import FrameworksMiddlewareValidate from '/docs/shared/frameworks-middleware-validate.mdx';
import FrameworksProxyMode from '/docs/shared/frameworks-proxy-mode.mdx';
import FrameworksProxyValidate from '/docs/shared/frameworks-proxy-validate.mdx';
import FrameworksMidleware from '/docs/shared/frameworks-proxy-use-middleware.mdx';
import MoreDetails from '/docs/shared/frameworks-more-details.mdx';
import IssuesAndContributing from '/docs/shared/issues-and-contributing.mdx';

<ShowWhenSdk {...props}>

<FrameworksMiddlewareDesc start_command="./foo"  />

<ExpandDocs title="Setting up the Optic Middleware" defaultOpen={false}>

<FrameworksSDK />

<FrameworksMiddleware {...frontMatter}/>

</ExpandDocs>

<ExpandDocs title="Validate your Middleware integration" defaultOpen={false}>

<FrameworksMiddlewareValidate />

</ExpandDocs>

</ShowWhenSdk>

<ShowWhenProxy {...props}>

<FrameworksProxyMode start_command="./foo" />

<ExpandDocs title="Setting up your Optic Proxy" defaultOpen={false}>

### Connect to Optic

Edit the `optic.yml` file created when you ran [`api init`](/document). For a proxy, you'll need to define the command to start your API and the port on which Optic should listen. Optic will tell your application to start on a specific port with the `PORT` environment variable. We recommend starting Optic on the port your project listens on today, so all of your consumers, such as tests and local clients, work without any changes.

#### Configuring optic.yml

```yml
tasks:
  start:
    command: ./foo
    inboundUrl: http://localhost:4000
```

#### Configuring your project

```rust title=Before
HttpServer::new(...)
    .bind("127.0.0.1:3005")?
    .run()
    .await
```

```rust title=After
let port = env::var("PORT").unwrap_or_else(|e| {
    return "3005".to_string()
});

HttpServer::new(...)
    .bind(format!("127.0.0.1:{}" , port))?
    .run()
    .await
```
<br />
<br />
</ExpandDocs>

<ExpandDocs title="Validate your Proxy integration" defaultOpen={false}>

<FrameworksProxyValidate />

</ExpandDocs>

<FrameworksMidleware framework={frontMatter.title} />

</ShowWhenProxy>

<MoreDetails />

<IssuesAndContributing />
