---
title: Rocket
productboard_url: 'https://portal.productboard.com/useoptic/3-integrations-board/c/29-rocket'
start_command: 'cargo run'
icon: '/img/langs/rocket.png'
---

import { ShowWhenSdk, ShowWhenProxy } from '../../src/components/FrameworkHelper';
import CodeBlock from '@theme/CodeBlock';
import ExpandDocs from '../../src/components/Expand';
import FrameworksPreflight from '../shared/frameworks-preflight.mdx'
import FrameworksMiddlewareDesc from '../shared/frameworks-middleware-desc.mdx';
import FrameworksMiddleware from '../shared/frameworks-middleware.mdx';
import FrameworksMiddlewareValidate from '../shared/frameworks-middleware-validate.mdx';
import FrameworksProxyMode from '../shared/frameworks-proxy-mode.mdx';
import FrameworksProxyValidate from '../shared/frameworks-proxy-validate.mdx';
import FrameworksMidleware from '../shared/frameworks-proxy-use-middleware.mdx';
import MoreDetails from '../shared/frameworks-more-details.mdx';

<FrameworksPreflight />

<ShowWhenSdk {...props}>

<iframe
  style={{width: '100%', height: 800}}
  src={frontMatter.productboard_url}
  frameBorder="0"
/><iframe
  style={{width: '100%', height: 800}}
  src={frontMatter.productboard_url}
  frameBorder="0"
/>

</ShowWhenSdk>

<ShowWhenProxy {...props}>

<FrameworksProxyMode start_command={frontMatter.start_command} />

### Connect to Optic

Edit the `optic.yml` file created when you ran `api init`. For a proxy, you'll need to define the command to start your API and the port on which Optic should listen. Optic will tell your application to start on a specific port with the `PORT` environment variable. We recommend starting Optic on the port your project listens on today, so all of your consumers, such as tests and local clients, work without any changes.

#### Configuring optic.yml

<CodeBlock className="language-yml" children={`
tasks:
  start:
    command: ${frontMatter.start_command}
    inboundUrl: http://localhost:4000
`.trim()}>
</CodeBlock>

#### Configuring your project

```rust title=Before
use rocket::config::{Config, Environment};
use std::env;

let config = Config::build(Environment::Staging)
    .port(4000)
    .unwrap();

rocket::custom(config)
    .mount("/", routes![hello])
    .launch();
```

```rust title=After
use rocket::config::{Config, Environment};
use std::env;

let mut port = 4000;
match env::var("PORT") {
    Ok(val) => port = val.parse::<u16>().unwrap(),
    Err(e) => {}
}

let config = Config::build(Environment::Staging)
    .port(port)
    .unwrap();

rocket::custom(config)
    .mount("/", routes![hello])
    .launch();
```

<br />
<br />

<FrameworksProxyValidate />

<FrameworksMidleware framework={frontMatter.title} />

</ShowWhenProxy>

## Next step: Document your first endpoint

Now Optic is integrated with your API, and you've confirmed traffic is flowing properly. Congratulations! Since you captured some traffic while testing the integration, now is a great time to [document your first endpoint](/document/baseline).

**Having trouble?** [Open an issue on GitHub](https://github.com/opticdev/optic/issues/new)
